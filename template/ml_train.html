{% extends 'base.html' %}
{% block content %}
<h1>Train ML Model</h1>
<p class="muted">Upload a CSV dataset to train a model that re-ranks outfit recommendations.</p>

<div class="card">
  <form method="post" enctype="multipart/form-data">
    <label for="dataset">CSV file</label>
    <input type="file" id="dataset" name="dataset" accept=".csv" required>
    <button type="submit" class="btn">Train</button>
  </form>
</div>

{% if info %}
  <h2>Training Info</h2>
  <pre>{{ info | tojson(indent=2) }}</pre>
{% endif %}

{% if metrics %}
  <h2>Metrics</h2>
  <pre>{{ metrics | tojson(indent=2) }}</pre>
{% endif %}

<p>Model available: <strong>{{ 'Yes' if model_available else 'No' }}</strong></p>

<div class="card">
  <h3>Dataset format</h3>
  <p>Include either a numeric <code>score</code> column (regression) or a categorical <code>label</code> column (classification).</p>
  <p>Recommended feature columns: <code>category</code>, <code>pattern</code>, <code>material</code>, <code>fit</code>, <code>seasonality</code>, <code>color_hex</code>, <code>occasions</code>, or a free-form <code>text</code> column.</p>
  <p>Example rows:</p>
  <pre>
category,pattern,material,fit,seasonality,color_hex,occasions,score
shirt,striped,cotton,slim,summer,#112233,"office,meeting",0.82
jeans,plain,denim,regular,all-season,#223344,casual,0.65
  </pre>
</div>
{% endblock %}
